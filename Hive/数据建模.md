# 数据建模

## 为啥需要数据建模
**数据模型**：如何合理地组织和存储数据，着眼于业务、应用、存储三个角度
良好数据模型的优势：
  - 快速查询数据，性能更好，I/O吞吐量减少
  - 减少数据的不必要冗杂，还能实现计算结果的复用，就是减少数据存储和计算成本
  - 数据质量

## 维度表（DM）、事实表（FT）、聚合表（AG）
**维度表**，度量（事实）的环境，反应业务的**一类属性**（该类属性的集合构成一个维度），**分析业务的一个窗口**
**事实表**，多个维度表的一个交点，包含描述业务内特定事务的数据，也包含联系其他维度表的键值，是数据仓库的中央核心表
> 度量，即可以量化的，可以参加统计运算的数值
> 
> 事实表一般不包含非数值型数据，所以数据量大，但占用空间并不很大，可以保证高查询效率
> 下面会谈及，事实表的主键是一个联合主键，既是各个维度表的外键

**聚合表**，一种中间表，是事实表的聚合操作所产生的中间表。因为事实表中的实际数据太多，一次查询扫描数据太多，而有时需要聚合（平均、最值、汇总等），提前聚合操作所产生的中间表就是聚合表

## 星型模型和雪花模型

## 粒度又是什么鬼
粒度反应数据仓库的数据单位保存的数据的细化的程度，**细化程度越高，粒度级就越小**。它能影响数据仓库中保存数据量的多少，以及查询的详细程度，总的来说就是要考虑存储和访问数据的效率，能否详细地分析数据的能力

[如何设计数据仓库？粒度问题是一个最重要方面](https://blog.csdn.net/tcict/article/details/78204880)
[数据仓库建模：定义事实表粒度及事实表关联非最低粒度的维度的情况](https://blog.csdn.net/Megustas_JJC/article/details/86266465)

## 维度该怎么选定
1. 并非要达到关系型数据库要求的三范式原则，那样反而复杂不利于维护，维度建模中要尽量避免使用外键，要扁平化，和范式反着来
2. 包含最细粒度
3. 围绕业务流程，所以要先调研需求
> 以上参考：
> [数据仓库学习与实践（二）- 如何做好数据模型设计](https://zhuanlan.zhihu.com/p/26332045)
> [数据平台维度模型设计十个技巧
](https://zhuanlan.zhihu.com/p/26908834)